<ion-header>
  <ion-navbar>
    <button ion-button menuToggle color="{{color}}">
      <ion-icon name="menu"></ion-icon>
    </button>
  </ion-navbar>
</ion-header>
<ion-content padding>
  <ion-row>
    <ion-col text-center>
      <ion-item>
        <h1>{{identity.username}}</h1></ion-item>
    </ion-col>
    <ion-col>
      <button ion-button large secondary (click)="addFriend()" *ngIf="isFriend === false && group !== true">
        Add contact&nbsp;<ion-icon name="create"></ion-icon>
      </button>
      <button ion-button large secondary (click)="joinGroup()" *ngIf="isFriend === false && group === true">
        Join group&nbsp;<ion-icon name="create"></ion-icon>
      </button>
      <button ion-button large secondary (click)="createSubGroup()" *ngIf="isFriend === true && group === true">
        Create sub-group&nbsp;<ion-icon name="create"></ion-icon>
      </button>
      <button ion-button large secondary (click)="compose()" *ngIf="isFriend === true">
        Compose message&nbsp;<ion-icon name="create"></ion-icon>
      </button>
      <button ion-button large secondary (click)="message()" *ngIf="isFriend === true && !group">
        Chat&nbsp;<ion-icon name="create"></ion-icon>
      </button>
      <button ion-button large secondary (click)="message()" *ngIf="isFriend === true && group === true">
        Group chat&nbsp;<ion-icon name="create"></ion-icon>
      </button>
      <button ion-button large secondary (click)="invite()" *ngIf="isFriend === true">
        Invite&nbsp;<ion-icon name="create"></ion-icon>
      </button>
      <button ion-button large secondary (click)="refer()" *ngIf="isFriend === true">
        Refer&nbsp;<ion-icon name="create"></ion-icon>
      </button>
    </ion-col>
  </ion-row>
  <ion-row>
    <h4>Public identity</h4>
    <ion-item>
      <ion-textarea type="text" [(ngModel)]="identityJson" autoGrow="true" rows="6"></ion-textarea>
    </ion-item>
  </ion-row>
  <ion-row>
    <ion-list>
      <ng-container *ngFor="let group of graphService.graph.groups">
        <ion-item *ngIf="group.relationship.parent && group.relationship.parent.username_signature === item.relationship.username_signature" (click)="openSubGroup(group)">
            {{group.relationship.username}}
        </ion-item>
      </ng-container>
    </ion-list>
  </ion-row>
</ion-content>